import type { NextPage } from "next";
import Head from "next/head";
import { useQuery } from "react-query";

import { Content } from "@/components/Content";

const Movies = () => {
  const { isLoading, error, data } = useQuery("repoData", () =>
    fetch("./sample.json").then((res) => res.json())
  );

  console.log(data);

  return (
    <div>
      <Head>
        <title>DEMO Streaming</title>
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/streaming.png" />
      </Head>

      <Content>
        <main className="overflow-hidden">
          {error ? "Oops, something went wrong" : ""}
          {isLoading ? (
            "Loading"
          ) : (
            <ul>
              {data.entries.map((i: any) => (
                <li key={i.id}>{i.title}</li>
              ))}
            </ul>
          )}
        </main>
      </Content>
    </div>
  );
};

export default Movies;
